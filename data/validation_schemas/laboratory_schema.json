{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Laboratory Data Schema",
  "type": "object",
  "required": [
    "laboratory_id",
    "name",
    "latitude",
    "longitude",
    "max_tests_per_day",
    "max_tests_per_month",
    "staff_count"
  ],
  "properties": {
    "laboratory_id": {
      "type": "string",
      "minLength": 1,
      "maxLength": 255,
      "pattern": "^[A-Z0-9_-]+$",
      "description": "Unique identifier for the laboratory"
    },
    "name": {
      "type": "string",
      "minLength": 1,
      "maxLength": 255,
      "description": "Laboratory name"
    },
    "latitude": {
      "type": "number",
      "minimum": -90,
      "maximum": 90,
      "description": "Latitude coordinate in decimal degrees"
    },
    "longitude": {
      "type": "number",
      "minimum": -180,
      "maximum": 180,
      "description": "Longitude coordinate in decimal degrees"
    },
    "address": {
      "type": ["string", "null"],
      "maxLength": 500,
      "description": "Physical address of the laboratory"
    },
    "phone": {
      "type": ["string", "null"],
      "maxLength": 50,
      "pattern": "^[+]?[0-9\\s\\-\\(\\)]+$",
      "description": "Contact phone number"
    },
    "email": {
      "type": ["string", "null"],
      "format": "email",
      "maxLength": 255,
      "description": "Contact email address"
    },
    "max_tests_per_day": {
      "type": "integer",
      "minimum": 1,
      "maximum": 10000,
      "description": "Maximum number of tests the laboratory can process per day"
    },
    "max_tests_per_month": {
      "type": "integer",
      "minimum": 1,
      "maximum": 300000,
      "description": "Maximum number of tests the laboratory can process per month"
    },
    "staff_count": {
      "type": "integer",
      "minimum": 1,
      "maximum": 1000,
      "description": "Number of staff members"
    },
    "equipment_count": {
      "type": "integer",
      "minimum": 1,
      "maximum": 100,
      "default": 1,
      "description": "Number of testing equipment units"
    },
    "utilization_factor": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "default": 0.8,
      "description": "Expected utilization factor (0-1)"
    },
    "operational_hours": {
      "type": "object",
      "properties": {
        "monday": { "$ref": "#/definitions/daily_hours" },
        "tuesday": { "$ref": "#/definitions/daily_hours" },
        "wednesday": { "$ref": "#/definitions/daily_hours" },
        "thursday": { "$ref": "#/definitions/daily_hours" },
        "friday": { "$ref": "#/definitions/daily_hours" },
        "saturday": { "$ref": "#/definitions/daily_hours" },
        "sunday": { "$ref": "#/definitions/daily_hours" }
      },
      "description": "Weekly operational hours"
    },
    "test_capabilities": {
      "type": "array",
      "items": { "$ref": "#/definitions/test_capability" },
      "description": "Available test types and their parameters"
    }
  },
  "definitions": {
    "daily_hours": {
      "type": "object",
      "properties": {
        "open_time": {
          "type": ["string", "null"],
          "pattern": "^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$",
          "description": "Opening time in HH:MM format"
        },
        "close_time": {
          "type": ["string", "null"],
          "pattern": "^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$",
          "description": "Closing time in HH:MM format"
        },
        "is_closed": {
          "type": "boolean",
          "default": false,
          "description": "Whether the laboratory is closed on this day"
        }
      }
    },
    "test_capability": {
      "type": "object",
      "required": [
        "test_type",
        "is_available",
        "time_per_test_minutes",
        "staff_required"
      ],
      "properties": {
        "test_type": {
          "type": "string",
          "enum": [
            "Culture Test - Basic",
            "Culture Test - Advanced",
            "Drug Sensitivity - Standard Panel",
            "Drug Sensitivity - Extended Panel",
            "Mycobacterium Culture",
            "Fungal Culture",
            "Rapid Diagnostic Test"
          ],
          "description": "Type of test"
        },
        "is_available": {
          "type": "boolean",
          "description": "Whether this test type is available"
        },
        "time_per_test_minutes": {
          "type": "integer",
          "minimum": 5,
          "maximum": 1440,
          "description": "Time required per test in minutes"
        },
        "staff_required": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10,
          "description": "Number of staff required for this test"
        },
        "equipment_utilization": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "default": 0.5,
          "description": "Equipment utilization factor for this test"
        },
        "cost_per_test": {
          "type": "number",
          "minimum": 0,
          "maximum": 10000,
          "default": 0,
          "description": "Cost per test in currency units"
        },
        "quality_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "default": 1.0,
          "description": "Quality score for this test type (0-1)"
        }
      }
    }
  },
  "additionalProperties": false
}